---
const { teacher } = Astro.props;

import { Icon } from "astro-icon";

import { Img } from "astro-imagetools/components";
import YoutubeIframe from "../YoutubeIframe.svelte";
import Favorite from "../common/Favorite.svelte";
---

<div
  class="flex flex-1 teacher-list-item transition-all ease-in-out delay-500 group"
>
  <div class="p-2 w-full lg:w-7/12 lg:mx-0">
    <div
      class="teacher-card relative bg-white overflow-hidden drop-shadow-none hover:drop-shadow-esl-lg mx-auto rounded-tl-[1rem] p-5 h-full"
    >
      <div class="left-side flex flex-1">
        <div class="min-w-[6.25rem]">
          <div
            class="rounded-full border-esl-c-1 border-4 w-[6.25rem] h-[6.25rem] overflow-hidden"
          >
            <Img src={teacher.image} alt={teacher.name} w={100} />
          </div>

          <div
            class="text-[#FFCC3E] text-[1.25rem] flex flex-1 items-center justify-center"
          >
            <svg
              name="ic:baseline-star-rate"
              xmlns="http://www.w3.org/2000/svg"
              class="h-[1.25rem] w-[1.25rem]"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              ><path
                fill="currentColor"
                d="M14.43 10L12 2l-2.43 8H2l6.18 4.41L5.83 22L12 17.31L18.18 22l-2.35-7.59L22 10z"
              ></path></svg
            >

            <span>{teacher.rating}</span>
          </div>
        </div>
        <div class="flex-grow px-[1rem] space-y-1">
          <div class="nameAndVerified">
            <p class="name tex-center font-medium">
              <span>{teacher.name}</span>&nbsp;
              <svg
                name="mdi:verified-user"
                xmlns="http://www.w3.org/2000/svg"
                class="h-[1.5rem] w-[1.5rem] inline-block text-[#64C01B]"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                ><path
                  fill="currentColor"
                  d="m10 17l-4-4l1.41-1.41L10 14.17l6.59-6.59L18 9m-6-8L3 5v6c0 5.55 3.84 10.74 9 12c5.16-1.26 9-6.45 9-12V5l-9-4Z"
                ></path></svg
              >
            </p>
          </div>
          <div>
            <span class="occupation">{teacher.occupation}</span>
          </div>
          <div>
            <span class="shortDesc">{teacher.shortDesc}</span>
          </div>
          <div class="longDesc text-[#A6A6A6] pt-2">
            <span class="longDescText clamped">{teacher.longDesc}</span>
            <span class="descVisibility hidden">
              <span>See More</span>
              <span class="hidden">See Less</span>
            </span>
          </div>
        </div>
        <div class="favorites">
          <Favorite client:load />
        </div>
      </div>
      <div class="flex flex-1 space-x-5 items-center justify-end pt-2">
        <div class="payDefinition">
          <span class="font-medium">{teacher.rate}元</span>
          <span class="text-[#9B9B9B]">/40分钟</span>
        </div>
        <a
          class="bg-[#FF4438] py-1 px-[2rem] rounded-full text-white"
          href="/teacher"
        >
          了解更多
        </a>
      </div>
    </div>
  </div>
  <div
    class="youtube-thumbnail hidden opacity-0 pointer-events-none flex-grow iframe-container lg:group-hover:block lg:block"
  >
    <YoutubeIframe client:load teacher={teacher}>
      <Img src={teacher.videoThumbnail} alt="Video" />
    </YoutubeIframe>
  </div>
</div>

<script></script>
<style>
  span.longDescText.clamped {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  span.longDescText.clamped.unclamped {
    -webkit-line-clamp: unset;
  }
  @media (min-width: 1024px) {
    .teacher-list-item:hover .iframe-container {
      opacity: 1;
      pointer-events: auto;
    }
  }
</style>
